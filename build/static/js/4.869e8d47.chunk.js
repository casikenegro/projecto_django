(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{336:function(e,t,a){"use strict";var n=a(17),r=a(24),i=a(19),c=a(18),l=a(20),o=a(1),s=a.n(o),u=a(34),p=a(25);t.a=function(e){var t=function(t){function a(){return Object(n.a)(this,a),Object(i.a)(this,Object(c.a)(a).apply(this,arguments))}return Object(l.a)(a,t),Object(r.a)(a,[{key:"render",value:function(){return this.props.isSuperuser&&s.a.createElement(e,this.props)||s.a.createElement(p.a,{type:"loading"})}}]),a}(o.Component);return Object(u.b)(function(e){return{isSuperuser:e.data_user.role}},null)(t)}},339:function(e,t,a){"use strict";a.r(t);var n=a(332),r=a(17),i=a(24),c=a(19),l=a(18),o=a(20),s=a(1),u=a.n(s),p=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props;e.children,Object(n.a)(e,["children"]);return u.a.createElement(u.a.Fragment,null,u.a.createElement("span",null,u.a.createElement("a",{href:"https://coreui.io"},"CoreUI")," \xa9 2018 creativeLabs."),u.a.createElement("span",{className:"ml-auto"},"Powered by ",u.a.createElement("a",{href:"https://coreui.io/react"},"CoreUI for React")))}}]),t}(s.Component);p.defaultProps={},t.default=p},349:function(e,t,a){},354:function(e,t,a){},365:function(e,t,a){},372:function(e,t,a){"use strict";a.r(t);var n=a(17),r=a(24),i=a(19),c=a(18),l=a(20),o=a(1),s=a.n(o),u=a(322),p=a(321),m=a(11),d=(a(349),a(325)),v=a(373),b=d.a.Search,h=v.a.Option,f=(s.a.createElement(v.a,{defaultValue:"G"},s.a.createElement(h,{value:"G"},"G"),s.a.createElement(h,{value:"P"},"P"),s.a.createElement(h,{value:"M"},"M")),function(e){return s.a.createElement(b,{id:"SearchFieldDevice",style:{width:500,marginBottom:20},size:"large",onChange:e.handleFilter,placeholder:"Introduce el serial de dipositivo"})}),g=a(39),O=a(336),E=v.a.Option,j=function(e){return s.a.createElement("td",null,e)},D=function(e){var t=e.type,a=e.values,n=e.forDefault,r=void 0===n?null:n,i=e.optionStyle,c=void 0===i?null:i,l=null;if(console.log(a),"simple"===t&&"string"===typeof a&&(l=j(a)),"select"===t&&Array.isArray(a)&&r){var o=function(e,t){return s.a.createElement(v.a,{style:{width:120},defaultValue:t,name:"status",className:"status"},e)}(a.map(function(e){var t,a;return t=e,a=c,s.a.createElement(E,{value:t,style:a},t)}),r);l=j(o)}return l},y=v.a.Option,C=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleClick=function(){var e=a.props,t=e.name;(0,e.selectDevice)(t)},a.getItemChildrenLayoutRenderDevice=a.getItemChildrenLayoutRenderDevice.bind(Object(m.a)(Object(m.a)(a))),a.getDataOptionDevice=a.getDataOptionDevice.bind(Object(m.a)(Object(m.a)(a))),a.getDataColumnsDevice=a.getDataColumnsDevice.bind(Object(m.a)(Object(m.a)(a))),a.handleClick=a.handleClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"getDataOptionDevice",value:function(){var e=this.props.name;return s.a.createElement(y,{key:e,value:e},e)}},{key:"getDataColumnsDevice",value:function(){var e=this.props,t=e.data,a=e.name,n=Object(O.a)(D);return s.a.createElement(s.a.Fragment,null,s.a.createElement(D,{type:"simple",values:a}),s.a.createElement(D,{type:"simple",values:t.typee}),s.a.createElement(D,{type:"simple",values:t.date_register}),s.a.createElement(n,{type:"select",forDefault:t.status,optionStyle:{width:"100px"},values:["ACTIVO","INACTIVO"]}),s.a.createElement("td",null,s.a.createElement(g.a,{disabled:"ACTIVO"!==t.status,onClick:this.handleClick,style:{background:"none",border:"none"},icon:"eye"})))}},{key:"getItemChildrenLayoutRenderDevice",value:function(){return"row-table"===this.props.type?this.getDataColumnsDevice():this.getDataOptionDevice()}},{key:"render",value:function(){console.log(this.props.type);var e=this.getItemChildrenLayoutRenderDevice();return s.a.createElement(s.a.Fragment,null,e)}}]),t}(o.Component),S=a(121),k=function(e){var t=e.children;return s.a.createElement(S.w,{responsive:!0,striped:!0},t)};k.Header=function(e){var t=e.children;return s.a.createElement("thead",null,s.a.createElement("tr",null,t))},k.Body=function(e){var t=e.children;return s.a.createElement("tbody",null,t)};var T=k,_=(a(43),v.a.Option,function(e){return s.a.createElement(v.a,{onChange:e.selectDevice,name:"select-device",id:"select-device",defaultValue:e.selected},e.children)}),I=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).getColumnsDevices=function(){return a.props.columns_header&&a.props.columns_header.map(a.columnOperation)},a.columnOperation=function(e){return s.a.createElement("th",{key:e},e)},a.getDevices=function(){return a.props.devices&&a.props.devices.map(a.deviceOperation)},a.getSimpleList=function(e){return s.a.createElement(v.a.Option,{value:e},e)},a.getItem=function(e){return"table"===a.props.type?s.a.createElement(C,{selectDevice:a.props.selectDevice,key:e[0],name:e[0],data:e[1],type:"row-"+a.props.type}):a.getSimpleList(e[0])},a.deviceOperation=function(e){var t=null;return a.props.filter&&e[0][0]!==a.props.filter||(t=a.getItem(e)),"table"===a.props.type?s.a.createElement("tr",null,t):t},a.getTable=function(e){return s.a.createElement(e,null,s.a.createElement(e.Header,null,a.getColumnsDevices()),s.a.createElement(e.Body,null,a.getDevices()))},a.getSelect=function(e){return s.a.createElement(e,{selectDevice:a.props.selectDevice,selected:a.props.selected},a.getDevices())},a.getColumnsDevices=a.getColumnsDevices.bind(Object(m.a)(Object(m.a)(a))),a.columnOperation=a.columnOperation.bind(Object(m.a)(Object(m.a)(a))),a.getDevices=a.getDevices.bind(Object(m.a)(Object(m.a)(a))),a.deviceOperation=a.deviceOperation.bind(Object(m.a)(Object(m.a)(a))),a.getTable=a.getTable.bind(Object(m.a)(Object(m.a)(a))),a.getSelect=a.getSelect.bind(Object(m.a)(Object(m.a)(a))),a.getItem=a.getItem.bind(Object(m.a)(Object(m.a)(a))),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=null;return"table"===this.props.type?e=this.getTable(T):"select"===this.props.type&&(e=this.getSelect(_)),s.a.createElement(s.a.Fragment,null,e)}}]),t}(o.PureComponent),F=function(e){var t=e.icon,a=e.color,n=e.value,r=e.onClick,i=e.type,c=e.fontColor;return s.a.createElement(g.a,{style:{backgroundColor:a,color:c,borderColor:a},size:"large",type:i,icon:t,onClick:r},n)},R=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).getColums=function(){return a.props.role?["Codigo","Tipo","Fecha de registro","Estado",""]:["Codigo","Tipo","Fecha de registro",""]},a.handleClickRegister=function(){return a.props.visible_form?a.props.setVisibleForm(!1):a.props.setVisibleForm(!0)},a.getButtonsOperations=function(){return s.a.createElement(u.a,{gutter:10},s.a.createElement(p.a,{span:4},s.a.createElement(F,{value:"Registrar",icon:"plus-circle",color:"ghost-primary",onClick:a.handleClickRegister,type:"primary"})),s.a.createElement(p.a,{span:4},s.a.createElement(F,{value:"Comprar",icon:"shopping",color:"#fadb14",fontColor:"black",onClick:null,type:"primary"})))},a.getCardTable=function(){var e=a.props.devices;return s.a.createElement(S.c,{style:{width:"1000px",margin:"auto"}},s.a.createElement(S.e,null,"Dispositivos Registrados"),s.a.createElement(S.d,null,s.a.createElement(f,{handleFilter:a.props.handleChangeSearch}),s.a.createElement(I,{columns_header:a.getColums(),devices:e,type:"table",selectDevice:a.props.selectDevice}),a.getButtonsOperations()))},a.getButtonsOperations=a.getButtonsOperations.bind(Object(m.a)(Object(m.a)(a))),a.getCardTable=a.getCardTable.bind(Object(m.a)(Object(m.a)(a))),a.handleClickRegister=a.handleClickRegister.bind(Object(m.a)(Object(m.a)(a))),a.getColums=a.getColums.bind(Object(m.a)(Object(m.a)(a))),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.visible?this.getCardTable():this.getButtonsOperations();return s.a.createElement(s.a.Fragment,null,e)}}]),t}(o.Component),w=a(34),x=a(27),V=a(123),A=a.n(V),L=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).componentDidMount=function(){a.props.device||a.props.getDevicesFromServer()},a.handleChangeSearch=function(e){var t=e.target.value;a.props.setFilterSearchDevice(t)},a.isDeviceInList=function(e){var t=a.props.filter_search.toUpperCase();return e[0].search(t)>-1},a.getDevices=function(){return A()(a.props.devices)},a.handleChangeSearch=a.handleChangeSearch.bind(Object(m.a)(Object(m.a)(a))),a.getDevices=a.getDevices.bind(Object(m.a)(Object(m.a)(a))),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.filter_search,t=""===e&&this.getDevices()||""!==e&&this.getDevices().filter(this.isDeviceInList),a=this.getDevices().length>0;return s.a.createElement(R,{role:this.props.role,devices:t,handleChangeSearch:this.handleChangeSearch,visible_form:this.props.visible_form,setVisibleForm:this.props.setVisibleForm,visible:a,selectDevice:this.props.selectDevice})}}]),t}(o.Component),M={setFilterSearchDevice:x.n,setVisibleForm:x.o,setDevices:x.m,selectDevice:x.l,getDevicesFromServer:x.h},N=Object(w.b)(function(e){return{role:e.data_user.role,devices:e.devices,filter_search:e.filter_search,visible_form:e.visible_form_device}},M)(L),P=a(324),B=a(323),G=a(375),z=(a(354),B.a.Item),U=v.a.Option,H=(s.a.createElement(G.a,{title:"Tipo de dispositivo\nG : valor en modulo\nP = valor en mapa\nS = seguimientos"},s.a.createElement(v.a,{defaultValue:"G"},s.a.createElement(U,{value:"G"},"G"),s.a.createElement(U,{value:"P"},"P"),s.a.createElement(U,{value:"S"},"S"))),B.a.create()(function(e){var t=e.onHandleSubmit;return s.a.createElement(B.a,{className:"register-device",onSubmit:t},s.a.createElement(z,null,s.a.createElement(d.a,{name:"input-create-device",type:"text",maxLength:4,placeholder:"Serial"})),s.a.createElement(z,null,s.a.createElement(g.a,{htmlType:"submit"},"Registrar")))})),J=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).onCancel=function(){a.props.setVisibleForm(!1)},a.onCancel=a.onCancel.bind(Object(m.a)(Object(m.a)(a))),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(P.a,{width:"500px",centered:!0,visible:this.props.visible_form,footer:null,onCancel:this.onCancel},s.a.createElement("h3",null,"Registra un dispositivo"),s.a.createElement(u.a,{align:"center"},s.a.createElement(p.a,{span:20},s.a.createElement(H,{onHandleSubmit:this.props.onSubmitDevice}))))}}]),t}(o.Component),K=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).onSubmitDevice=function(e){e.preventDefault();var t=document.getElementsByName("input-create-device")[0].value;console.log("contenido de input : "+t),a.props.fetchCreateDevice(t)},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(J,{visible_form:this.props.visible_form,setVisibleForm:this.props.setVisibleForm,onSubmitDevice:this.onSubmitDevice})}}]),t}(s.a.Component),W={setVisibleForm:x.o,fetchCreateDevice:x.g},$=Object(w.b)(function(e){return{visible_form:e.visible_form_device}},W)(K),q=a(374),Q=a(25),X=a(378),Y=a(379),Z=a(371),ee=a(380),te=a(377),ae=a(343),ne=a(355),re=a(356),ie=a(331),ce=a(358),le=a(359),oe=a.n(le);ae.b.add(ce.a),ae.b.add(ce.b);var se=oe()(),ue=s.a.createElement("div",null,s.a.createElement(ne.a,{icon:ce.a,color:se,size:"3x",style:{position:"absolute",bottom:"100%",left:"-7px"}}),s.a.createElement(ne.a,{icon:ce.b,color:"white",size:"1x",style:{position:"absolute",left:"1px",bottom:"250%"}})),pe=Object(re.renderToStaticMarkup)(ue),me=Object(ie.divIcon)({html:pe}),de=(a(360),function(e){var t=e.positions,a=null;a=Array.isArray(t)?t[t.length-1]:t;var n=t&&[a.lat,a.lon];return s.a.createElement(X.a,{className:"map element-operation",center:n||[51.0009,-9e-4],zoom:13},s.a.createElement(Y.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.a.createElement(Z.a,{icon:me,position:n},s.a.createElement(ee.a,null,"A pretty CSS3 popup.",s.a.createElement("br",null),"Easily customizable.")),s.a.createElement(te.a,{positions:t,color:"#F9B451"}))}),ve=function(){return s.a.createElement("div",null,s.a.createElement(u.a,{gutter:24},s.a.createElement(p.a,{span:20,offset:4},s.a.createElement(de,null))))},be=function(e){var t=e.devices,a=e.selected,n=e.handleChangeDateTime,r=e.selectDevice;return s.a.createElement("div",{className:"panel-options element-operation"},s.a.createElement(I,{type:"select",devices:t,selectDevice:r,selected:a,filter:"S"}),s.a.createElement(u.a,{gutter:15},s.a.createElement(p.a,{span:3},s.a.createElement("label",{htmlFor:"fi"},"Inicio")),s.a.createElement(p.a,{offset:3},s.a.createElement(d.a,{id:"fi",name:"fi",className:"input-panel-operation",onChange:n,type:"datetime"}))),s.a.createElement(u.a,{gutter:15},s.a.createElement(p.a,{span:3},s.a.createElement("label",{htmlFor:"ff"},"Final")),s.a.createElement(p.a,{offset:3},s.a.createElement(d.a,{id:"ff",name:"ff",className:"input-panel-operation",onChange:n,type:"datetime"}))),s.a.createElement(g.a,null,"Agregar Rango"))},he={xs:24,md:24,lg:12,xl:16},fe={xs:24,md:24,lg:12,xl:8},ge=function(e){var t=e.devices,a=e.positions,n=e.selected,r=e.handleChangeDateTime,i=e.selectDevice;return s.a.createElement("div",null,s.a.createElement(u.a,{gutter:24,justify:"space-between",align:"center"},s.a.createElement(p.a,fe,s.a.createElement(be,{handleChangeDateTime:r,selected:n,selectDevice:i,devices:t})),s.a.createElement(p.a,he,a&&s.a.createElement(de,{positions:a}))))},Oe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).componentWillMount=function(e,t){console.log(e),console.log(t)},a.componentDidMount=function(){a.props.getLastPosition(a.props.device_selected)},a.validateRangeDate=function(){var e=new RegExp("^([0-2][0-9]|3[0-1])/(0[1-9]|1[0-2])/(2[0-9]{3}) ([0-1][0-9]|2[0-3]):([0-5][0-9])$");return!(!e.test(a.firstDateTime)||!e.test(a.secondDateTime))&&(a.setDeviceRanges(),!0)},a.obtainDate=function(e){return new Date(e[0],e[1],e[2],e[3],e[4])},a.obtainSplitDate=function(e,t){return e.split(t)},a.setDeviceRanges=function(){var e=new RegExp("[/ :]");a.positions=a.props.positions.filter(function(t){var n=a.obtainSplitDate(t.datetime,e),r=a.obtainDate(n);n=a.obtainSplitDate(a.firstDateTime,e);var i=a.obtainDate(n);n=a.obtainSplitDate(a.secondDateTime,e);var c=a.obtainDate(n);return i<=r&&c>=r}),a.forceUpdate()},a.validInput=function(){return a.firstDateTime&&a.secondDateTime},a.handleChangeDateTime=function(e){"fi"===e.target.name?a.firstDateTime=e.target.value:a.secondDateTime=e.target.value;var t=a.validInput(),n=a.validateRangeDate();t&&(a.positions=null),t&&n&&a.setDeviceRanges()},a.getArrayDevices=function(){return A()(a.props.devices)},a.selectDevice=function(e){a.props.selectDevice(e),a.positions=null,a.forceUpdate()},a.addRanges=function(e){},a.firstDateTime=null,a.secondDateTime=null,a.getArrayDevices=a.getArrayDevices.bind(Object(m.a)(Object(m.a)(a))),a.handleChangeDateTime.bind(Object(m.a)(Object(m.a)(a))),a.validateRangeDate=a.validateRangeDate.bind(Object(m.a)(Object(m.a)(a))),a.selectDevice=a.selectDevice.bind(Object(m.a)(Object(m.a)(a))),a.validInput=a.validInput.bind(Object(m.a)(Object(m.a)(a))),a.positions=null,a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.positions||this.props.positions[this.props.positions.length-1];return s.a.createElement(ge,{devices:this.getArrayDevices(),positions:e,selectDevice:this.selectDevice,selected:this.props.selected,handleChangeDateTime:this.handleChangeDateTime})}}]),t}(o.Component),Ee={selectDevice:x.l,getLastPosition:x.j,getIntervalPosition:x.i},je=Object(w.b)(function(e){return{devices:e.devices,selected:e.device_selected,positions:e.positions[e.device_selected]}},Ee)(Oe),De=function(){return s.a.createElement("div",null)},ye=(a(365),q.a.TabPane),Ce=[{title:"Valor en mapa",type:"M",icon:"eye",Module:ve},{title:"Seguimiento",type:"S",icon:"fall",Module:je},{title:"Valor en Modulo",type:"G",icon:"tablet",Module:De}],Se=function(e){e.device_name;var t=e.data_device,a=t&&"ACTIVE"===t.status&&t.type;return console.log(a),s.a.createElement(q.a,{className:"operation-section",defaultActiveKey:a,activeKey:a},Ce.map(function(e){var t,n,r=e.type,i=e.icon,c=e.Module,l=e.title;return s.a.createElement(ye,{key:r,tab:s.a.createElement("span",null,s.a.createElement(Q.a,{type:i})," ",l," "),disabled:(t=a,n=r,t!==n)},s.a.createElement(c,null))}))},ke=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.device_name,a=e.data_device;return s.a.createElement(Se,{device_name:t,data_device:a})}}]),t}(o.Component),Te=Object(w.b)(function(e){return{device_name:e.device_selected,data_device:e.devices[e.device_selected]}},null)(ke),_e=a(339),Ie=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).loading=function(){return s.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(u.a,null,s.a.createElement(p.a,{xs:"12",lg:"0"},s.a.createElement(N,null))),s.a.createElement(u.a,null,s.a.createElement(p.a,{xs:"12",sm:"6"},s.a.createElement($,null))),s.a.createElement(u.a,{justify:"center",span:20},s.a.createElement(p.a,null,s.a.createElement(Te,null))),s.a.createElement(u.a,{justify:"center",span:20},s.a.createElement(p.a,null,s.a.createElement(_e.default,null))))}}]),t}(o.Component);t.default=Ie}}]);
//# sourceMappingURL=4.869e8d47.chunk.js.map